<% if user_signed_in? %>
  <div id="contribution_form_wrapper" class="modal" data-open-immediately="<%= @show_contrib_form %>">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Contribution or Interest</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <%= form_for @contribution do |f| %>
            <div>
              <div>This is a:</div>
              <div class="form-check form-check-inline">
                <%= f.radio_button :contribution_type, 'contribution', class: 'form-check-input', data: {'show-explainer' => 'contribution'} %> <label for="contribution_contribution_type_contribution" class="form-check-label">Contribution</label>

              </div>
              <div class="form-check form-check-inline">
                <%= f.radio_button :contribution_type, 'interest', class: 'form-check-input', data: {'show-explainer' => 'interest'} %> <label for="contribution_contribution_type_interest" class="form-check-label">Interest</label>
              </div>
            </div>
            <div class="contribution-type-explainer" data-show-if="contribution">Use this if you want to give a talk or workshop on the subject.</div>
            <div class="contribution-type-explainer" data-show-if="interest">Use this if you want to hear a talk about the subject.</div>
            <div class="form-group">
              <label for="contribution_title">Title:</label>
              <%= f.text_field :title, class: 'form-control ' + valid_class(@contribution, 'title'), required: true %>
              <div class="invalid-feedback">You need to add a title</div>
            </div>
            <div class="form-group">
              <label for="contribution_description">Description</label>
              <%= f.text_area :description, class: 'form-control ' + valid_class(@contribution, 'description'), rows: 8, required: true %>
              <div class="invalid-feedback">You need to add a description</div>
            </div>
            <button class="btn btn-primary" type="submit">Save</button>
            <%= link_to 'Cancel', '', data: {dismiss: 'modal'} %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>
<h2 class="section-title">Contributions</h2>

<% if @contributions.empty? %>
  <p>No contributions yet.</p>
<% end %>
<%= render @contributions %>

<h2 class="section-title">Interests</h2>
<% if @interests.empty? %>
  <p>No contributions yet.</p>
<% end %>
<%= render partial: 'contribution', collection: @interests %>
<hr>
Want to add a contribution or an interest? What <%= link_to 'are you waiting for?', '#contribution_form_wrapper', data: {toggle: 'modal'} %>
